<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>wbcTracking - Income Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    nav ul {
      display: flex;
      list-style: none;
      background: #007bff;
      padding: 0;
    }

    nav li {
      margin: 0;
    }

    nav a {
      display: block;
      padding: 12px 20px;
      color: white;
      text-decoration: none;
    }

    nav a.active {
      background-color: #0056b3;
    }

    main {
      padding: 20px;
      background: #f7f7f7;
      min-height: 100vh;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background-color: white;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #007bff;
      color: white;
    }

    form {
      margin-top: 20px;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
    }

    form input, form select {
      padding: 6px;
      margin: 5px;
    }

    form label {
      font-weight: bold;
      margin-right: 10px;
    }

    .submit-btn {
      padding: 10px 20px;
      background: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 10px;
    }

    .submit-btn:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><a href="index.html">üè† Home</a></li>
      <li><a href="income.html" class="active">üí∞ Income Tracker</a></li>
      <li><a href="summary.html">üìÖ Weekly Summary</a></li>
    </ul>
  </nav>

  <main>
    <h1>üí∞ Income Tracker</h1>

    <table id="income-table">
      <!-- Replace only the <table> and <form> sections with this updated one -->
  <thead>
    <tr>
      <th>Date</th>
      <th>Shift</th>
      <th>Cash In</th>
      <th>Cash Out</th>
      <th>Net Loss</th>
      <th>Agent Commission</th>
      <th>Loader Salary</th>
      <th>Other Expenses</th>
      <th>Net House Income</th>
      <th>Chips In</th>
      <th>Chips Out</th>
      <th>Net Chips</th>
      <th>Action</th> <!-- New column -->
    </tr>
  </thead>
  <tbody id="table-body">
    <tr>
      <td contenteditable="true">2025-04-28</td>
      <td contenteditable="true">12PM TO 8PM</td>
      <td contenteditable="true">100000</td>
      <td contenteditable="true">63000</td>
      <td>37000</td>
      <td contenteditable="true">13125</td>
      <td contenteditable="true">3000</td>
      <td contenteditable="true">3260</td>
      <td>17615</td>
      <td contenteditable="true">88910</td>
      <td contenteditable="true">91356</td>
      <td>-2446</td>
      <td>
        <select onchange="handleRowAction(this)">
          <option value="">--Select--</option>
          <option value="add">Add</option>
          <option value="update">Update</option>
          <option value="delete">Delete</option>
        </select>
      </td>
    </tr>
  </tbody>
</table>


    <form id="entryForm">
      <h3>Manual Entry</h3>
      <label>Date: <input type="date" id="date" required></label>
      <label>Shift:
        <select id="shift">
          <option>12PM TO 8PM</option>
          <option>8PM TO 4AM</option>
          <option>4AM TO 12PM</option>
        </select>
      </label><br>
      <label>Cash In: <input type="number" id="cashIn" required></label>
      <label>Cash Out: <input type="number" id="cashOut" required></label><br>
      <label>Agent Commission: <input type="number" id="agentComms" required></label>
      <label>Loader Salary: <input type="number" id="loaderSalary" required></label>
      <label>Other Expenses: <input type="number" id="otherExpenses" required></label><br>
      <label>Chips In: <input type="number" id="chipsIn" required></label>
      <label>Chips Out: <input type="number" id="chipsOut" required></label><br><br>

      <label>Action:
        <select id="actionSelect">
          <option value="add">Add</option>
          <option value="update">Update</option>
          <option value="delete">Delete</option>
        </select>
      </label>

      <button type="button" class="submit-btn" onclick="handleAction()">Submit</button>
    </form>
  </main>

  <script>
  function handleRowAction(select) {
    const action = select.value;
    const row = select.closest("tr");
    const cells = row.querySelectorAll("td");

    if (action === "delete") {
      row.remove();
      alert("üóëÔ∏è Row deleted.");
    } else if (action === "add") {
      const clone = row.cloneNode(true);
      clone.querySelector("select").value = "";
      document.getElementById("table-body").appendChild(clone);
      alert("‚úÖ Row added.");
    } else if (action === "update") {
      // Auto-calculate values
      const cashIn = parseFloat(cells[2].textContent) || 0;
      const cashOut = parseFloat(cells[3].textContent) || 0;
      const agentCom = parseFloat(cells[5].textContent) || 0;
      const loader = parseFloat(cells[6].textContent) || 0;
      const otherExp = parseFloat(cells[7].textContent) || 0;
      const chipsIn = parseFloat(cells[9].textContent) || 0;
      const chipsOut = parseFloat(cells[10].textContent) || 0;

      const netLoss = cashIn - cashOut;
      const netHouse = netLoss - agentCom - loader - otherExp;
      const netChips = chipsIn - chipsOut;

      cells[4].textContent = netLoss;
      cells[8].textContent = netHouse;
      cells[11].textContent = netChips;

      alert("üìù Row updated with new values.");
    }

    // Reset dropdown
    select.value = "";
  }
</script>

</body>
</html>
